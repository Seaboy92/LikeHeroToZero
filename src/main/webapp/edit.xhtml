<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >
<h:head>
    <f:metadata>
        <f:viewAction action="#{navigation.ladeEdit}" />
    </f:metadata>
    <style type="text/css">
        body {
            font-family: var(--font-family, inherit);
        }
    </style>
    <title>Co2-Daten - Administration</title>
</h:head>
<h:body style="margin-left: 75px; margin-right: 75px;">
    <h2>CO2-Daten</h2>
    <br />
    <h:form>
        <p:commandButton value="Logout" action="#{benutzerBean.logout}" />
    </h:form>
    <br/>
    <h2>Neue Daten für Freigabe</h2>
    <h:form>
        <p:dataTable id="neueDatenTabelle" value="#{neueDatenBean.eintraege}" var="neueDaten" scrollable="true" scrollHeight="500">
            <p:column style="width:150px">
                <f:facet name="header">
                    Id
                </f:facet>
                <h:outputText value="#{neueDaten.id}"/>
            </p:column>
            <p:column style="width:150px">
                <f:facet name="header">
                    ISO
                </f:facet>
                <h:outputText value="#{neueDaten.iso}"/>
            </p:column>
            <p:column style="width:150px">
                <f:facet name="header">
                    Land
                </f:facet>
                <h:outputText value="#{co2DatenBean.laenderNamen[neueDaten.iso]}"/>
            </p:column>
            <p:column style="width:150px">
                <f:facet name="header">
                    Jahr
                </f:facet>
                <h:outputText value="#{neueDaten.jahr}"/>
            </p:column>
            <p:column style="width:150px">
                <f:facet name="header">
                    Wert
                </f:facet>
                <h:outputText value="#{neueDaten.wert}"/>
            </p:column>
            <p:column style="width:150px">
                <f:facet name="header">
                    Bemerkung
                </f:facet>
                <h:outputText value="#{neueDaten.bemerkung}"/>
            </p:column>
            <p:column style="width:150px">
                <f:facet name="header">
                    Aktion
                </f:facet>               
                    <p:commandButton value="Wert genehmigen" action="#{neueDatenBean.transform(neueDaten)}" update="neueDatenTabelle" onclick="return confirm('Eintrag wirklich freigeben?');" style="width:175px"/>
                    <br />
                    <p:commandButton value="Wert löschen" action="#{neueDatenBean.delete(neueDaten)}" update="neueDatenTabelle" onclick="return confirm('Eintrag wirklich löschen?');" style="width:175px; margin-top: 0.5rem;"/>               
            </p:column>
        </p:dataTable>
    </h:form>
</h:body>
</html>